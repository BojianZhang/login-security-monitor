# 企业级安全邮件管理系统

## 🎯 系统概述

这是一个集成了**邮件服务管理**和**登录安全监控**的企业级综合管理系统。系统采用 Java Spring Boot + Vue 3 架构，提供完整的邮件服务和强大的安全防护功能。

### 🌟 核心特性

#### ✉️ 邮件管理系统
- **多域名支持**: 支持管理多个邮件域名，灵活配置主域名和次域名
- **别名管理**: 每个用户可以创建多个邮箱别名，支持别名转发功能
- **文件夹系统**: 完整的邮件文件夹管理（收件箱、发件箱、草稿箱、垃圾箱等）
- **邮件收发**: 支持邮件的接收、发送、搜索和分类
- **存储配额**: 灵活的用户存储配额管理
- **附件管理**: 支持邮件附件的上传、下载和管理

#### 🛡️ 安全监控系统
- **登录监控**: 实时监控用户登录行为，记录IP、地理位置、设备信息
- **异地检测**: 智能检测异地登录，基于地理位置计算风险评分
- **攻击防护**: 自动检测和防护SQL注入、XSS、暴力破解等攻击
- **风险评估**: 综合评估登录风险，支持多因素风险计算
- **实时警报**: 自动生成安全警报，支持邮件通知管理员
- **IP黑白名单**: 智能IP管理，自动拉黑恶意IP

#### 📊 数据保护系统
- **自动备份**: 多级备份策略（定时备份、紧急备份、攻击触发备份）
- **数据加密**: 备份文件自动加密，确保数据安全
- **完整性验证**: SHA256校验确保数据完整性
- **灾难恢复**: 完整的灾难恢复流程，快速恢复系统
- **紧急响应**: 检测到攻击时自动激活保护模式

## 🏗️ 技术架构

### 后端技术栈
- **Java 17** - 现代Java特性支持
- **Spring Boot 3.1** - 企业级应用框架
- **Spring Security** - 认证授权安全框架
- **Spring Data JPA** - 数据访问层
- **MySQL 8.0** - 关系型数据库
- **Redis** - 缓存和会话管理
- **Docker** - 容器化部署

### 前端技术栈
- **Vue 3** - 现代前端框架
- **TypeScript** - 类型安全的JavaScript
- **Element Plus** - 企业级UI组件库
- **Pinia** - 状态管理
- **Vue Router** - 前端路由
- **Axios** - HTTP客户端
- **ECharts** - 数据可视化

## 🚀 快速开始

### 环境要求
- Docker 20.10+
- Docker Compose 2.0+
- Java 17+ (开发环境)
- Node.js 18+ (开发环境)

### 部署步骤

#### 1. 克隆项目
```bash
git clone <repository-url>
cd secure-email-system
```

#### 2. 配置环境
```bash
# 复制环境配置文件
cp .env.example .env

# 编辑配置文件，设置数据库密码、JWT密钥等
nano .env
```

#### 3. 启动服务

**开发环境:**
```bash
./deploy.sh dev
```

**生产环境:**
```bash
./deploy.sh prod
```

#### 4. 访问系统
- 主应用: http://localhost:3000
- 后端API: http://localhost:8080
- 数据库管理: http://localhost:8081

### 默认账号
- 用户名: `admin`
- 密码: `admin123`
- 角色: 系统管理员 + 邮件管理员

## 📋 功能模块

### 1. 统一仪表板
- 邮件系统和安全监控的统一概览
- 实时统计数据展示
- 快速操作入口
- 系统状态监控

### 2. 邮件管理
- 域名管理和配置
- 邮箱别名创建和管理
- 邮件文件夹分类
- 邮件搜索和过滤
- 存储配额管理

### 3. 安全监控
- 登录记录分析
- 异地登录检测
- 安全警报管理
- 风险评分展示
- IP黑白名单管理

### 4. 数据保护
- 自动备份管理
- 手动备份操作
- 数据恢复功能
- 紧急响应机制
- 系统监控状态

## 📖 使用指南

### 邮件系统使用

1. **配置域名**
   - 进入"邮件管理"添加域名
   - 配置DNS记录（MX、DKIM、SPF等）

2. **创建邮箱别名**
   - 点击"新建别名"
   - 输入别名前缀，选择域名
   - 设置转发地址（可选）

3. **管理邮件**
   - 查看和发送邮件
   - 使用文件夹分类
   - 设置邮件规则

### 安全监控使用

1. **查看登录记录**
   - 实时监控登录活动
   - 分析地理位置分布
   - 识别异常登录模式

2. **处理安全警报**
   - 查看警报详情
   - 标记处理状态
   - 设置误报标记

3. **IP管理**
   - 查看黑白名单
   - 手动添加信任IP
   - 移除误判IP

## 🔐 安全特性

### 认证授权
- JWT无状态认证
- BCrypt密码加密
- 角色权限控制
- 会话管理

### 攻击防护
- SQL注入防护
- XSS攻击防护
- CSRF防护
- 暴力破解防护
- 请求频率限制

### 数据安全
- 数据加密存储
- 安全传输(HTTPS)
- 定期备份
- 完整性校验

## 🆘 故障排除

### 常见问题

1. **邮件无法发送**
   - 检查SMTP配置
   - 验证DNS设置
   - 确认网络连通性

2. **安全警报过多**
   - 调整风险阈值
   - 添加信任IP
   - 优化检测规则

3. **系统性能问题**
   - 检查资源使用率
   - 优化数据库连接
   - 调整缓存配置

### 日志位置
- 应用日志: `logs/backend/application.log`
- 安全日志: `logs/security-monitor.log`
- Nginx日志: `logs/nginx/access.log`

## 📊 系统监控

### 实时监控
- 服务运行状态
- 资源使用情况
- 数据库性能
- 邮件队列状态

### 报告生成
- 安全分析报告
- 邮件使用统计
- 系统健康报告
- 攻击事件汇总

---

**企业级安全邮件管理系统** - 为您的企业提供安全、可靠的邮件服务和全面的安全防护。

🔗 **技术栈**: Java 17 + Spring Boot 3.1 + Vue 3 + TypeScript + MySQL 8.0 + Redis + Docker

🛡️ **安全等级**: 企业级安全防护，银行级数据保护

📧 **邮件功能**: 多域名支持，无限别名，智能分类

🚀 **部署方式**: 一键Docker部署，支持开发和生产环境